apiVersion: v1
kind: ConfigMap
metadata:
  labels:
    app: traefik
  name: traefik
data:
  traefik.yaml: |
    global:
      checkNewVersion: false
      sendAnonymousUsage: false
    entrypoints:
      traefik:
        address: ":9000"
      http:
        address: ":80"
        http:
          redirections:
            entryPoint:
              to: https
              scheme: https
              permanent: true
      https:
        address: ":443"
        # forwardedHeaders:
        #   insecure: true
    providers:
      kubernetesCRD: {}
    metrics:
      prometheus: {}
    ping:
      entryPoint: traefik
    api:
      insecure: true
      dashboard: true
    log:
      format: json
      level: ERROR
    accessLog:
      format: json
    tracing:
      jaeger:
        samplingServerURL: "http://jaeger-agent.monitor.svc.cluster.local:5778/sampling"
        localAgentHostPort: "jaeger-agent.monitor.svc.cluster.local:6831"
        gen128Bit: true
  dynamic.yaml: |
    tls:
      certificates:
        - certFile: /var/certificates/tls.crt
          keyFile: /var/certificates/tls.key
      options:
        default:
          minVersion: VersionTLS13
