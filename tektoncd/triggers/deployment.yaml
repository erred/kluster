apiVersion: apps/v1
kind: Deployment
metadata:
  name: tekton-triggers-webhook
spec:
  replicas: 1
  selector:
    matchLabels:
      app: tekton-triggers-webhook
  template:
    metadata:
      annotations:
        cluster-autoscaler.kubernetes.io/safe-to-evict: "false"
      labels:
        app: tekton-triggers-webhook
    spec:
      containers:
        - env:
            - name: SYSTEM_NAMESPACE
              valueFrom:
                fieldRef:
                  fieldPath: metadata.namespace
          image: gcr.io/tekton-releases/github.com/tektoncd/triggers/cmd/webhook@sha256:c0f6cd59922c472bb3ad386513b681b8bf5aaf48e6811bd6de24bdf09062af8a
          name: webhook
          volumeMounts:
            - mountPath: /etc/config-logging
              name: config-logging
      serviceAccountName: tekton-triggers-controller
      volumes:
        - configMap:
            name: config-logging-triggers
          name: config-logging
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: tekton-triggers-controller
spec:
  replicas: 1
  selector:
    matchLabels:
      app: tekton-triggers-controller
  template:
    metadata:
      annotations:
        cluster-autoscaler.kubernetes.io/safe-to-evict: "false"
      labels:
        app: tekton-triggers-controller
    spec:
      containers:
        - args:
            - -logtostderr
            - -stderrthreshold
            - INFO
            - -el-image
            - gcr.io/tekton-releases/github.com/tektoncd/triggers/cmd/eventlistenersink@sha256:34dc184a59d0c8e357b6208388cbbc9095a92508f522d18a3a371c22e0d4c930
          env:
            - name: SYSTEM_NAMESPACE
              valueFrom:
                fieldRef:
                  fieldPath: metadata.namespace
            - name: CONFIG_LOGGING_NAME
              value: config-logging-triggers
            - name: CONFIG_OBSERVABILITY_NAME
              value: config-observability-triggers
            - name: METRICS_DOMAIN
              value: tekton.dev/triggers
          image: gcr.io/tekton-releases/github.com/tektoncd/triggers/cmd/controller@sha256:c04694411632b05b0bc2116c641432b8d596c5814394adbc659f16505fed9db4
          name: tekton-triggers-controller
          volumeMounts:
            - mountPath: /etc/config-logging
              name: config-logging
      serviceAccountName: tekton-triggers-controller
      volumes:
        - configMap:
            name: config-logging-triggers
          name: config-logging
