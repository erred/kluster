apiVersion: tekton.dev/v1beta1
kind: Task
metadata:
  name: go-staticcheck
spec:
  workspaces:
    - name: src
      description: Root of code
  steps:
    - name: staticcheck
      image: golang:$(params.version)
      workingDir: $(workspaces.src.path)
      args:
        - -unused.whole-program
        - -checks=all,-ST1000
        - ./...
