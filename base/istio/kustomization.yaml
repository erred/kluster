apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
namespace: istio-system
bases:
  - crds
resources:
  - certificate.k8s.yaml
  - clusterrole.k8s.yaml
  - clusterrolebinding.k8s.yaml
  - configmap.k8s.yaml
  - deployment.k8s.yaml
  - envoyfilter.k8s.yaml
  - horizontalpodautoscaler.k8s.yaml
  - issuer.k8s.yaml
  - mutatingwebhookconfiguration.k8s.yaml
  - namespace.k8s.yaml
  - poddisruptionbudget.k8s.yaml
  - role.k8s.yaml
  - rolebinding.k8s.yaml
  - service.k8s.yaml
  - serviceaccount.k8s.yaml
  - validatingwebhookconfiguration.k8s.yaml
patchesJson6902:
  - target:
      group: apps
      version: v1
      kind: Deployment
      name: istio-ingressgateway
    patch: |
      - op: add
        path: /spec/template/spec/containers/0/ports/1/hostPort
        value: 80
      - op: add
        path: /spec/template/spec/containers/0/ports/2/hostPort
        value: 443
secretGenerator:
  - name: gcp-medea-cert-manager
    options:
      disableNameSuffixHash: true
    files:
      - key.json
  - name: p12-password
    options:
      disableNameSuffixHash: true
    literals:
      - password=password
