receivers:
  otlp:
    protocols:
      grpc:
  k8s_cluster:
    auth_type: serviceAccount
    node_conditions_to_report:
      - Ready
      - MemoryPressure

processors:
  batch:
  memory_limiter:
    ballast_size_mib: 200
    check_interval: 5s
    limit_mib: 400
    spike_limit_mib: 50

exporters:
  jaeger:
    endpoint: http://jaeger.jaeger.svc.cluster.local:14250
    insecure: true
  prometheusremotewrite:
    endpoint: "http://prometheus.prometheus.svc.cluster.local/api/v1/write"

extensions:
  health_check:
    port: 13133
  pprof:
    endpoint: :1777
  zpages:
    endpoint: :55679

service:
  extensions:
    - health_check
    - pprof
    - zpages
  pipelines:
    metrics:
      receivers:
        - otlp
        - k8s_cluster
      processors:
        - memory_limiter
        - batch
      exporters:
        - prometheusremotewrite

    traces:
      receivers:
        - otlp
      processors:
        - memory_limiter
        - batch
      exporters:
        - jaeger
